model EmTest

type int
type string

external VerifyString using string
external VerifyPassword using string
external VerifyCpr using int
external VerifyBooks list Resource1

entity Thing {
	MadeOf using string
} 

entity Person : Thing {
	Cpr using int
} 

entity User : Person {
    DbId using int
    Name using string requires VerifyString
    Password using string requires VerifyPassword
    Age using int requires Age > 0 && Age < 130
    require Age > 5 || Age < 130
    require VerifyPassword of Name
    require Cpr > 0
    require VerifyCpr of Cpr
    require VerifyString of MadeOf
	
	Book reference Resource1
	Books list Resource1 
	require VerifyString of Book.Title
} 

entity GeneralResource {
	Age using int
} 

entity Resource1 : GeneralResource {
	Title using string
}

controller UserController uses User {
    CREATE with Book.Title with Books.Age exclude DbId
    GET on Name
    UPDATE on DbId with Password, Name
    LIST
}